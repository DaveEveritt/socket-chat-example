<!doctype html>
<html>
<head>
  <title>Socket.IO chat</title>
  <link rel="stylesheet" href="/styles.css">
</head>

<body>

  <ul id="messages"></ul>
  <form id="msgForm" action="#">
    <input id="msg" autocomplete="off" /><button>Send</button>
  </form>

  <script src="/socket.io/socket.io.js"></script>
  <script>
    (function () {
      var socket = io();
      var messageForm = document.getElementById("msgForm");
      var message = document.getElementById("msg");
      var messages = document.getElementById("messages");
      messageForm.addEventListener("submit", function(ev){
        socket.emit('chat message', message.value);
        message.value = '';
        ev.preventDefault();
      });
      socket.on('chat message', function(msg){
        messages.innerHTML += `<li>${msg}</li>`;
      });
    })();
  </script>
  
</body>
</html>
